<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="google-site-verification" content="EuGaf0qNgRtMvwny8HrokMmm5a_7plge-RA0OWIyvTU" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>EMDR online</title>
<style>
	html {
		background: rgb(251,251,251);
		background: linear-gradient(0deg, rgba(251,251,251,1) 0%, rgba(153,190,194,1) 100%);
	}
	
	.upcontent {
	  display: inline-block;
	  border-radius: 4px;
	  border-width: 0;
	  width: 60px;
      height: 34px;
	  position: relative;
	  top: -68px;
	  left : -5px;
	  font-size: inherit;
		padding: 0.2em;
		margin: 0.1em 0.2em;

		box-sizing: content-box;
		text-align:center;
			background-color: #CCCCCC;
    color: black;
	}
	

	
	.focus
	{
	background-color: #3978F2;
    color: white;
	}

label {
  display: inline-block;
  width: 6em;
  margin-right: .5em;

}
	
	.base {
		padding: 16px 32px;
    }
	
	h1 {
		text-align:center;
	}
	
	.pad {
		background: rgb(251,251,251);
		border-radius: 4px;
		padding: 8px 58px 8px 8px;
	}
	
	.play {
		overflow:auto
	}
	
	.subpad {
	
		height:200px;
		padding: 20px;
	}
	
	.square {
	  height: 50px;
	  width: 50px;
	  background-color: #25a2ff;
	  border-radius: 25px;
	  position:relative;
	  left:0%;
	  
	}
	
	#start {
    background-color: #4CAF50; /* Green */
    border: none;
    color: white;
    padding: 15px 32px;
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
	border-radius: 4px;
	float: right;
   
	}
	
	#bpmInput {
		width:80%;
	}
	
.switch {
  position: relative;
  display: inline-block;
  width: 60px;
  height: 34px;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  -webkit-transition: .4s;
  transition: .4s;
}

.slider:before {
  position: absolute;
  content: "";
  height: 26px;
  width: 26px;
  left: 4px;
  bottom: 4px;
  background-color: white;
  -webkit-transition: .4s;
  transition: .4s;
}

input:checked + .slider {
  background-color: #2196F3;
}

input:focus + .slider {
  box-shadow: 0 0 1px #2196F3;
}

input:checked + .slider:before {
  -webkit-transform: translateX(26px);
  -ms-transform: translateX(26px);
  transform: translateX(26px);
}

/* Rounded sliders */
.slider.round {
  border-radius: 34px;
}

.slider.round:before {
  border-radius: 50%;
}

	.limit {
        max-width: 100px;
    }
	
    #dialog_log {
    overflow: auto;
flex: 1 1 auto;
        padding: 21px;
    }

    #dialog_log > p {
        padding: 0px;
        margin: 0px;
        font-size: 14px;
    }

</style>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
	<meta property="og:image" content="https://kodomoyeh.github.io/emdr-ico.png" />
	<link rel="icon" type="image/png" sizes="32x32" href="./emdr-ico.png">
	<link rel="icon" type="image/png" sizes="96x96" href="./emdr-ico.png">
	<link rel="icon" type="image/png" sizes="16x16" href="./emdr-ico.png">
	
	<link href="./fontawesome/css/fontawesome.css" rel="stylesheet">
	<link href="./fontawesome/css/brands.css" rel="stylesheet">
	<link href="./fontawesome/css/solid.css" rel="stylesheet">
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-2JZ6DCFTXK"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());


  gtag('config', 'G-2JZ6DCFTXK');
</script>
  </head>
  <body>

<h1 class="header">EMDR online</h1>




<div class="base">

<div class="pad">
	<div class="subpad" id="dot">

	</div>
	<div class="subpad" id="slide">
		<div class="square" id="animate"></div>
	</div>
</div>


<div class="play" style="padding: 8px;">
<button id="start"><i class="fa-solid fa-play"></i></button>
</div>

<div class="controlpad">
	<div class="setting">
		<div class="sub-setting">
		<h3>Speed</h3>
		
		<button id="keyMinus">&#8722;</button>
		<input id="bpmInput" value="100" max="240" min="30" type="range">
		<button id="keyPlus">+</button>
		<span class="textOut" id="bpmOut">100 BPM</span>
		</div>
		
		<div class="sub-setting">
		<h3>Move Type</h3>
		<label class="switch">
		  <input type="checkbox" id="harmonic">
		  <span class="slider round"></span>
		</label>
		<span class="textOut" id="moveTypeOut">Static Speed</span>
		</div>

		<div class="sub-setting">
		<h3>Run time</h3>
		<div style="padding-top: 48px;flex-direction: row;">
	

            <label id="labelInfinite"> Loop <button id="bInfinite" class="upcontent focus" ><i class="fa-solid fa-infinity"></i></button>
			</label>
			
            <label id="labelMinute"> Minutes <input id="bMinute" class="upcontent notfocus"  value="-1" max="10" min="-1" type="number"></label>
		
			<label id="labelCount"> Counts <input id="bCount" class="upcontent notfocus"  value="-1" max="2400" min="-1" type="number"></label>
			
 
		
		

		</div>
		</div>

		
		
	</div>
	
	<div class="shape-color">
		<div class="sub-setting">
		<h3>Color</h3>
		<div style="padding-top: 20px;">
		
			<input type="color" id="mainColor" name="head"
				   value="#25a2ff">
			<label for="head"></label>
		</div>
		</div>


	</div>
	<div class="tune">

	</div>
</div>
</div>






      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

      <script>
		var running =false;
		$("#start").click(function(){
			if(!running)
			{
				running = true;
				let id = null;
				var bpm = document.getElementById("bpmInput").value;
				var harmonic = document.getElementById("harmonic").checked;
				console.log(harmonic)
				var step = bpm*5/600.0;
				const elem = document.getElementById("animate");
				elem.style.left = "0%"; 
				let pos = 0;
				clearInterval(id);
				id = setInterval(frame, 5);
				var count = $('#bCount').val();
				function frame() {
				if (pos > 100) {
					step *= -1;
					pos+=step;
					count--;
				  //clearInterval(id);
				} else if (pos < 0) {
					step *= -1;
					pos+=step;
					count--;
				  //clearInterval(id);
				}
			
				if(running && count != 0){
				  pos+=step; 
				  if(harmonic)
				  {
					  var hpos=-50.0*Math.cos(pos/100.0*Math.PI)+50; 
					  
					  elem.style.left = hpos + "%"; 
				  }
				  else
				  {
						elem.style.left = pos + "%"; 
				  }
				  
				}
				else
				{
					clearInterval(id);
				}
				}
			}
			else
			{
				running = false;
			}
			//alert("The text has been changed.");
		});
		
		$("#bpmInput").change(function(){
			var v = document.getElementById("bpmInput").value;
			//console.log(v);
			document.getElementById("bpmOut").textContent = v +" BPM";
		});
		$("#harmonic").change(function(){
			var v = document.getElementById("harmonic").checked;
			console.log(v);
			if(v)
				document.getElementById("moveTypeOut").textContent = "Simple Harmonic Motion";
			else
				document.getElementById("moveTypeOut").textContent = "Static Speed";
		});
		$("#keyMinus").click(function(){
			var v = document.getElementById("bpmInput").value;
			v--;
			console.log(v);
			document.getElementById("bpmInput").value = v;
			document.getElementById("bpmOut").textContent = v +" BPM";
		});
		$("#keyPlus").click(function(){
			var v = document.getElementById("bpmInput").value;
			v++;
			console.log(v);
			document.getElementById("bpmInput").value = v;
			document.getElementById("bpmOut").textContent = v +" BPM";
		});
		$("#mainColor").change(function(){
			var v = document.getElementById("mainColor").value;
			//console.log(v);
			$('#animate').css('background-color', v);
		});
		
		$("#labelInfinite").click(function(){
			$('.upcontent').removeClass("focus");
			$('#bInfinite').addClass("focus");
			$('#bMinute').val(-1);
			$('#bCount').val(-1);
		});
		
		$("#labelMinute").click(function(){
			$('.upcontent').removeClass("focus");
			$('#bMinute').addClass("focus");
		});
		
		$("#labelCount").click(function(){
			$('.upcontent').removeClass("focus");
			$('#bCount').addClass("focus");
		});
		
		$("#bMinute").change(function(){
			//$('.upcontent').removeClass("focus");
			//$('#bMinute').addClass("focus");
			var v = $('#bpmInput').val() * $('#bMinute').val()
			//$('#bMinute').val(0);
			$('#bCount').val(v);
		});
		
		$("#bCount").change(function(){
			//$('.upcontent').removeClass("focus");
			//$('#bCount').addClass("focus");
			$('#bMinute').val(-1);
			//$('#bCount').val(0);
		});
		
		
      </script>



      </section>
      <footer>
        <!--<p><small>Hosted on <a href="http://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>-->
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>
